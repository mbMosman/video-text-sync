/*! @license html5-youtube.js by Ginpei https://github.com/ginpei/html5-youtube.js MIT License */
!function(e,t,i){var r=Array.prototype.slice,n=i.prototype;
// ----------------------------------------------------------------
// Statics
/**
	 * Overwrite for compat.
	 */
i.bind=function(e,t){var i=r.call(arguments,2);return function(){var n=i.concat(r.call(arguments));return e.apply(t,n)}},/**
	 * Overwrite for compat.
	 */
i._execDefineProperty=function(e,t,i){e[t]=function(e){return arguments.length>0?(i.set.call(this,e),e):i.get.call(this)}},/**
	 * Register a callback for initializing.
	 * @param {String} playerId
	 * @param {Player} player
	 */
i.registerYouTubePlayerReady=function(t,i){e.onYouTubePlayerReady||(e.onYouTubePlayerReady=this.bind(this.onYouTubePlayerReady,this),this._callbacksForYouTubePlayerReady={}),this._callbacksForYouTubePlayerReady[t]=i},/**
	 * The unified callback for YouTube API Player.
	 * It is called by YouTube API when it is completly loaded.
	 * @param {String} playerId
	 * @see registerYouTubePlayerReady
	 */
i.onYouTubePlayerReady=function(e){
// save the CSSStylesheet object
this._style||(this._style=t.styleSheets[t.styleSheets.length-1]),this._callbacksForYouTubePlayerReady[e].onYouTubePlayerReady(e)},
// ----------------------------------------------------------------
// Constructing
/**
	 * Overwrite for compat.
	 */
n._initializeEventer=function(){},/**
	 * Overwrite for compat.
	 */
n._clearEventer=function(){},/**
	 * Overwrite for compat.
	 */
n._buildPlayer=function(t){var r=this._getVideoOptions(t);if(r.videoId||(r.videoId="xxxxxxxxxxx"),!e.swfobject)throw new Error('swfobject is required. Use this code:\n<script src="//cdnjs.cloudflare.com/ajax/libs/swfobject/2.2/swfobject.js"><\/script>');
// set up ID
this._originalElemId=r.el.id;var n=r.el.id="youtubejs"+Date.now();
// save the target element to restore when destroyed
this._elOriginal=r.el,
// callback
i.registerYouTubePlayerReady(n,this);
// load
// `fs=0` is required because fullscreen button does not work (OMG)
var a="http://www.youtube.com/v/"+r.videoId+"?wmode=opaque&fs=0&enablejsapi=1&version=3&playerapiid="+n,o={allowScriptAccess:"always",wmode:"transparent"},l={id:n};swfobject.embedSWF(a,n,r.width,r.height,"8",null,null,o,l)},n._destroyPlayer=function(){var e=this.player;
// API's destroying
this.player.destroy(),this.player=null;
// restore the elements
var t=this._elOriginal;this._originalElemId?t.id=this._originalElemId:t.removeAttribute("id"),this._elOriginal=null;var i=e.parentNode;i.insertBefore(t,e),i.removeChild(e),
// clear style
this._clearYTStyle(t.id),this._elOriginal=null},/**
	 * Clear style rules that were specified by YouTube API.
	 * @param {String} id
	 */
n._clearYTStyle=function(e){for(var t="#"+e,r=i._style,n=r.cssRules||r.rules,a=0,o=n.length;a<o;a++){if(n[a].selectorText===t){r.deleteRule?r.deleteRule(a):r.removeRule(a);break}}},/**
	 * A callback that is called when YouTube API is ready.
	 * @param {String} playerId
	 * @see Player.registerYouTubePlayerReady
	 */
n.onYouTubePlayerReady=function(e){var i=this.player=t.getElementById(e),r=e.replace(/-/g,"_");this._registerVideoEvents(i,r);var n={type:"onReady",data:null,target:i};this.onReady(n)},/**
	 * Register callbacks for YouTube APIs.
	 * @param {Player} player
	 * @param {String} prefix
	 * @see #_registerVideoEvent
	 */
n._registerVideoEvents=function(e,t){this._registerVideoEvent(e,t,"onApiChang"),this._registerVideoEvent(e,t,"onError"),this._registerVideoEvent(e,t,"onPlaybackQualityChange"),this._registerVideoEvent(e,t,"onPlaybackRateChange"),this._registerVideoEvent(e,t,"onReady"),this._registerVideoEvent(e,t,"onStateChange")},/**
	 * Register a specified callback for YouTube APIs.
	 * @param {Player} player
	 * @param {String} prefix
	 * @param {String} type
	 */
n._registerVideoEvent=function(t,r,n){var a=r+n;t.addEventListener(n,a),e[a]=i.bind(function(e,t){try{// error will be wasted by swf
var i={type:e,data:t,target:this};this[e](i)}catch(e){console.error(e)}},this,n)},
// ----------------------------------------------------------------
// Events
/**
	 * Overwrite for compat.
	 * @see https://github.com/ginpei/Osteoporosis.js/blob/ccf3380fef9f8fd850c44fa017ad863af2ddb9b7/osteoporosis.js#L36-L54
	 */
n.addEventListener=function(e,t){this._pushListener(e,t)},/**
	 * Overwrite for compat.
	 */
n.removeEventListener=function(e,t){this._popListener(e,t)},/**
	 * Overwrite for compat.
	 * @see https://github.com/ginpei/Osteoporosis.js/blob/ccf3380fef9f8fd850c44fa017ad863af2ddb9b7/osteoporosis.js#L56-L68
	 */
n.trigger=function(e,i){var r,n=this._events[e];if(n){
// wrap specified event object
t.createEvent?(r=t.createEvent("CustomEvent"),r.initEvent(e,!1,!0)):(r=t.createEventObject(),r.type=e),r.player=this,i&&(r.playerData=i.data,r.originalEvent=i);
// execute triggering
for(var a=0,o=n.length;a<o;a++){var l=n[a];l&&l.binded(r)}return this}}}(window,document,window.youtube.Player);
